# 📂 [Web] Web MVC 방식과 PRG 패턴 실무 정리

> 날짜: 2026-01-26 | 난이도: 기초(Silver 4 수준)

### 1. MVC 구조와 서블릿/JSP의 역할 🏗️
서블릿(로직)과 JSP(화면)를 결합하여 유지보수성을 높인 구조입니다.

* **Controller (서블릿)**: 브라우저의 요청을 처리하고 응답에 필요한 데이터를 준비합니다.
* **View (JSP)**: 서블릿이 준비한 데이터를 전달받아 EL을 사용하여 최종 화면을 생성합니다.
* **Model (객체)**: 컨트롤러에 필요한 데이터를 제공하거나 비즈니스 로직을 수행하는 객체들입니다.

| 구성 요소 | 위치 | 핵심 역할 |
| :--- | :--- | :--- |
| **Servlet** | `Java Resources/src` | 응답 데이터 완성, 객체 협업, 코드 재사용 |
| **JSP** | `WEB-INF/` 하위 | EL을 이용한 데이터 출력, HTML 코드 활용 |

### 2. MVC 설계 원칙 및 경로 보안 🚩
* **서블릿 우선 호출**: 브라우저는 반드시 컨트롤러 역할을 하는 서블릿을 먼저 호출해야 합니다.
* **JSP 직접 접근 금지**: 사용자가 주소창에 JSP 경로를 입력해 직접 들어오는 것을 막아야 합니다.
* **WEB-INF 활용**: `/WEB-INF/` 경로는 브라우저에서 직접 접근이 불가능하므로, JSP 파일은 이곳에 두어 보안을 강화합니다.

### 2. 서블릿 핵심 문법 (Spring Boot의 근간) 🛠️
실무에서 요청을 처리하고 페이지를 이동시키는 핵심 코드입니다.

#### **① 파라미터 수집**
```java
// 모든 요청 데이터는 기본적으로 String 타입임
String val = req.getParameter("name");
```

#### **② 페이지 이동 방식 (Forward vs Redirect)**
- **Forward (내부 배포)**: 서버 내부에서 이동하므로 URL이 변하지 않으며, JSP로 데이터를 전달할 때 필수입니다.

```Java
req.getRequestDispatcher("/WEB-INF/todo/list.jsp").forward(req, resp);
```
- **Redirect (외부 재접속)**: 브라우저에게 주소를 새로 호출하라고 명령하며, URL이 변경됩니다.

```Java
resp.sendRedirect("/todo/list");
```

#### 3. PRG 패턴 (Post-Redirect-Get) 🔄
- POST 방식 처리 후 발생할 수 있는 **중복 등록 문제를 해결**하는 백엔드의 필수 패턴입니다.

1. **POST**: 사용자가 데이터를 전송하여 서버에서 처리 요청.
2. **Redirect**: 처리가 완료되면 sendRedirect()를 호출하여 다른 경로(GET)로 이동 지시.
3. **GET**: 브라우저는 새로운 경로를 호출하여 결과 화면을 출력.

- Why?: 새로고침 시 마지막 요청이 POST일 경우 동일 데이터가 중복 저장되는 사고를 방지하기 위함입니다. (마지막 요청을 GET으로 변경)

#### 4. 실전 설계 가이드
- 브라우저의 호출은 반드시 **컨트롤러(Servlet)**을 향해야 한다.
- JSP는 `/WEB-INF/` 아래에 두어서 브라우저의 직접 접근을 차단한다.
- 조회는 GET, 데이터 변경(등록/수정/삭제)는 POST 방식을 사용한다.